<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Chapter 11 Continuous Response | Gov 50: Data" />
<meta property="og:type" content="book" />



<meta name="github-repo" content="davidkane9/PPBDS" />



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="Chapter 11 Continuous Response | Gov 50: Data">

<title>Chapter 11 Continuous Response | Gov 50: Data</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<link href="libs/msmb-css-0/msmb.css" rel="stylesheet" />
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);

e.style.display = ((e.style.display!='none') ? 'none' : 'block');

if(f.classList.contains('fa-plus-square')) {
    f.classList.add('fa-minus-square')
    f.classList.remove('fa-plus-square')
} else {
    f.classList.add('fa-plus-square')
    f.classList.remove('fa-minus-square')
}

}
</script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }

code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul class="navbar">
<li class="msmb"><p class="title">Gov 50: Data<p><p class="author"></p>
<li class="dropdown" style="float:right">
<a href="javascript:void(0)" class="dropbtn">&#x25BE; Chapters</a>
<div class="dropdown-content">
<a href="index.html"></a>
<a href="preamble.html">Preamble</a>
<a href="shopping-week.html">Shopping Week</a>
<a href="visualization.html"><span class="toc-section-number">1</span> Visualization</a>
<a href="wrangling.html"><span class="toc-section-number">2</span> Wrangling</a>
<a href="rubin-causal-model.html"><span class="toc-section-number">3</span> Rubin Causal Model</a>
<a href="functions.html"><span class="toc-section-number">4</span> Functions</a>
<a href="probability.html"><span class="toc-section-number">5</span> Probability</a>
<a href="one-parameter.html"><span class="toc-section-number">6</span> One Parameter</a>
<a href="two-parameters.html"><span class="toc-section-number">7</span> Two Parameters</a>
<a href="three-parameters.html"><span class="toc-section-number">8</span> Three Parameters</a>
<a href="n-parameters.html"><span class="toc-section-number">9</span> N Parameters</a>
<a href="model-choice.html"><span class="toc-section-number">10</span> Model Choice</a>
<a id="active-page" href="continuous-response.html"><span class="toc-section-number">11</span> Continuous Response</a><ul class="toc-sections">
<li class="toc"><a href="#exploratory-data-analysis"> Exploratory Data Analysis</a></li>
<li class="toc"><a href="#linear-model"> Linear model</a></li>
<li class="toc"><a href="#bayesian-linear-model"> Bayesian linear model</a></li>
<li class="toc"><a href="#neural-network"> Neural network</a></li>
<li class="toc"><a href="#model-comparison"> Model comparison</a></li>
<li class="toc"><a href="#cardinal-virtues-1"> Cardinal virtues</a></li>
<li class="toc"><a href="#summary-1"> Summary</a></li>
</ul>
<a href="discrete-response.html"><span class="toc-section-number">12</span> Discrete Response</a>
<a href="appendices.html">Appendices</a>
<a href="tools.html">Tools</a>
<a href="shiny.html">Shiny</a>
<a href="maps.html">Maps</a>
<a href="animation.html">Animation</a>
<a href="references.html">References</a>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div id="continuous-response" class="section level1">
<h1>
<span class="header-section-number">Chapter 11</span> Continuous Response</h1>
<!-- DK: Error message from running nn fit_resamples. -->
<p>Chapter <a href="model-choice.html#model-choice">10</a> showed us the <em>tidymodels</em> framework for model building and testing. In this chapter, we will use it to explore models in which the outcome variable is <em>continuous</em>. In Chapter <a href="discrete-response.html#discrete-response">12</a>, we learn about outcome variables which are <em>discrete</em>, meaning that they are members of distinct categories like TRUE/FALSE or yes/no.</p>
<p>We use <code>nes</code> from the <code>PPBDS.data</code> package. <code>nes</code> contains data from the American National Election Survey, conducted every presidential election cycle. Along with demographic details, such as race, gender, and age, the survey also contains respondents’ ideological identification. Because <code>ideology</code> is measured on a scale from -3 to 3, we can treat it as our continuous outcome variable.</p>
<p>Throughout this chapter, we seek to answer this question: Which variables are associated with one’s ideology, and how so?</p>
<div id="exploratory-data-analysis" class="section level2">
<h2>
<span class="header-section-number">11.1</span> Exploratory Data Analysis</h2>
<p>Packages:</p>
<div class="sourceCode" id="cb1090"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1090-1"><a href="continuous-response.html#cb1090-1"></a><span class="kw">library</span>(PPBDS.data)</span>
<span id="cb1090-2"><a href="continuous-response.html#cb1090-2"></a><span class="kw">library</span>(skimr)</span>
<span id="cb1090-3"><a href="continuous-response.html#cb1090-3"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb1090-4"><a href="continuous-response.html#cb1090-4"></a><span class="kw">library</span>(tidymodels)</span>
<span id="cb1090-5"><a href="continuous-response.html#cb1090-5"></a><span class="kw">library</span>(rstanarm)</span></code></pre></div>
<p>The <strong>tidymodels</strong> framework makes it easy to use functions from various different packages in constructing, fitting, and testing models.</p>
<div class="sourceCode" id="cb1091"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1091-1"><a href="continuous-response.html#cb1091-1"></a><span class="kw">glimpse</span>(nes)</span></code></pre></div>
<pre><code>## Rows: 38,558
## Columns: 11
## $ year      &lt;int&gt; 1952, 1952, 1952, 1952, 1952, 1952, 1952, 1952, 1952, 1952,…
## $ state     &lt;chr&gt; "NY", "NY", "NY", "NY", "OH", "OH", "ID", "MI", "GA", "OH",…
## $ gender    &lt;chr&gt; "Female", "Female", "Female", "Male", "Female", "Female", "…
## $ income    &lt;ord&gt; 68 - 95, 68 - 95, 34 - 67, 34 - 67, 0 - 16, 68 - 95, 0 - 16…
## $ age       &lt;ord&gt; 25 - 34, 25 - 34, 25 - 34, 55 - 64, 65 - 74, 45 - 54, 65 - …
## $ education &lt;ord&gt; Highschool, Elementary, Highschool, Some Highschool, Highsc…
## $ race      &lt;chr&gt; "White", "White", "White", "White", "White", "White", "Whit…
## $ ideology  &lt;int&gt; 2, 1, 0, 3, 3, -1, 0, -2, NA, 2, -2, 3, -1, -2, 3, -2, -3, …
## $ pres_appr &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
## $ voted     &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No…
## $ region    &lt;fct&gt; Northeast, Northeast, Northeast, Northeast, Midwest, Midwes…</code></pre>
<p>Great! Before we dive in, let’s identify the variables available to us in <code>nes</code>:</p>
<!-- DK: Is voted in previous election or in this one? -->
<ul>
<li>
<code>year</code>: the year the study was conducted.</li>
<li>
<code>state</code>: abbreviation for state of residence.</li>
<li>
<code>gender</code>: identifies respondents with values “Male” and “Female”.</li>
<li>
<code>race</code>: race/ethnicity respondent identification.</li>
<li>
<code>income</code>: 5 income groups described with percentile range: 0-16, 17-33, 34 to 67, 68-95, and 96-100.</li>
<li>
<code>age</code>: ranges for respondents’ age.</li>
<li>
<code>education</code>: seven categories of educational achievement.</li>
<li>
<code>pres_appr</code>: respondents’ self-reported approval of the sitting president.</li>
<li>
<code>voted</code>: whether the respondent had voted in the presidential election.</li>
<li>
<code>ideology</code> a continuous variable with -3 corresponding to strongly Democrat and 3 corresponding to strongly Republican.</li>
<li>
<code>region</code>: US region: Northeast, Midwest, West, and South.</li>
</ul>
<p>Given knowledge of these variables for a new person, our goal is to predict their ideology correctly.</p>
<div class="sourceCode" id="cb1093"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1093-1"><a href="continuous-response.html#cb1093-1"></a><span class="kw">skim</span>(nes)</span></code></pre></div>
<p><!--
<caption>--><span class="marginnote shownote"><span id="tab:unnamed-chunk-847">TABLE 11.1: </span>Data summary</span><!--</caption>--></p>
<table><tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">nes</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">38558</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">11</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">character</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="left">factor</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody></table>
<p><strong>Variable type: character</strong></p>
<table>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">min</th>
<th align="right">max</th>
<th align="right">empty</th>
<th align="right">n_unique</th>
<th align="right">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">state</td>
<td align="right">110</td>
<td align="right">1.00</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">50</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">gender</td>
<td align="right">141</td>
<td align="right">1.00</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">race</td>
<td align="right">287</td>
<td align="right">0.99</td>
<td align="right">5</td>
<td align="right">15</td>
<td align="right">0</td>
<td align="right">6</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">pres_appr</td>
<td align="right">9646</td>
<td align="right">0.75</td>
<td align="right">6</td>
<td align="right">10</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">voted</td>
<td align="right">4078</td>
<td align="right">0.89</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">income</td>
<td align="right">2517</td>
<td align="right">0.93</td>
<td align="left">TRUE</td>
<td align="right">5</td>
<td align="left">34 : 11740, 68 : 9974, 0 -: 6300, 17 : 6213</td>
</tr>
<tr class="even">
<td align="left">age</td>
<td align="right">450</td>
<td align="right">0.99</td>
<td align="left">TRUE</td>
<td align="right">7</td>
<td align="left">25 : 7669, 35 : 7342, 45 : 6545, 55 : 6021</td>
</tr>
<tr class="odd">
<td align="left">education</td>
<td align="right">397</td>
<td align="right">0.99</td>
<td align="left">TRUE</td>
<td align="right">7</td>
<td align="left">Hig: 9269, Som: 8540, Col: 5540, Som: 4688</td>
</tr>
<tr class="even">
<td align="left">region</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="left">FALSE</td>
<td align="right">4</td>
<td align="left">Sou: 13680, Mid: 10072, Wes: 7428, Nor: 7378</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead><tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1989.40</td>
<td align="right">20.5</td>
<td align="right">1952</td>
<td align="right">1972</td>
<td align="right">1992</td>
<td align="right">2012</td>
<td align="right">2016</td>
<td align="left">▃▃▃▃▇</td>
</tr>
<tr class="even">
<td align="left">ideology</td>
<td align="right">619</td>
<td align="right">0.98</td>
<td align="right">-0.38</td>
<td align="right">2.1</td>
<td align="right">-3</td>
<td align="right">-2</td>
<td align="right">-1</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">▇▂▂▂▅</td>
</tr>
</tbody>
</table>
<p>There are three data types: factors, characters, and integers. However, <code>income</code>, <code>age</code>, and <code>education</code> are ordered factors. This means that each factor level is considered additively. Ordered factors can have weird effects in certain models, so we need to be wary.</p>
<p>There are a lot of rows in this dataset. <code>nes</code> covers 1954 through 2016, but for our sake, we will narrow our scope to just 2016. Because of the changing nature of what makes someone ideologically liberal or ideologically conservative over time, it is best to construct a model in which we eliminate as much of this variance as possible. Keep in mind that, when feeding in new data to our model, it is most accurately applied to voters in or around 2016.</p>
<p>Note that all of the variables are incomplete, meaning they contain <code>NA</code> values. While there are methods to impute missing data, we will simply remove these values for now.</p>
<div class="sourceCode" id="cb1094"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1094-1"><a href="continuous-response.html#cb1094-1"></a>ch11 &lt;-<span class="st"> </span>nes <span class="op">%&gt;%</span></span>
<span id="cb1094-2"><a href="continuous-response.html#cb1094-2"></a><span class="st">  </span><span class="kw">select</span>(year, gender, race, income, age, education, ideology, region) <span class="op">%&gt;%</span></span>
<span id="cb1094-3"><a href="continuous-response.html#cb1094-3"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2016</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1094-4"><a href="continuous-response.html#cb1094-4"></a><span class="st">  </span><span class="kw">drop_na</span>()</span></code></pre></div>
<!-- DK: What should I do with ordered factors? Change them here? Change them in nes itself? If I leave them, will our various models be able to do something with them? Perhaps I will need to use a step_* to fix? Or maybe step_dummy takes care of that? -->
<p>The first step in data science is to split our data set into training and testing samples, and then to create cross-validations of the training data.</p>
<div class="sourceCode" id="cb1095"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1095-1"><a href="continuous-response.html#cb1095-1"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb1095-2"><a href="continuous-response.html#cb1095-2"></a>ch11_split &lt;-<span class="st"> </span><span class="kw">initial_split</span>(ch11, <span class="dt">prob =</span> <span class="fl">0.80</span>)</span>
<span id="cb1095-3"><a href="continuous-response.html#cb1095-3"></a>ch11_train &lt;-<span class="st"> </span><span class="kw">training</span>(ch11_split)</span>
<span id="cb1095-4"><a href="continuous-response.html#cb1095-4"></a>ch11_test  &lt;-<span class="st"> </span><span class="kw">testing</span>(ch11_split)</span>
<span id="cb1095-5"><a href="continuous-response.html#cb1095-5"></a>ch11_folds &lt;-<span class="st"> </span><span class="kw">vfold_cv</span>(ch11_train, <span class="dt">v =</span> <span class="dv">10</span>)</span></code></pre></div>
<p>We can now explore three different models for this problem: a traditional linear model, a Bayesian linear model, and a neural network.</p>
<!-- DK: Could give a brief review of each model at the start, perhaps even fit it on the whole data set and discuss what you see. Or maybe do that all at once, in this section here. -->
</div>
<div id="linear-model" class="section level2">
<h2>
<span class="header-section-number">11.2</span> Linear model</h2>
<p>Create the workflow object with the model engine.</p>
<div class="sourceCode" id="cb1096"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1096-1"><a href="continuous-response.html#cb1096-1"></a>lm_wfl &lt;-<span class="st"> </span><span class="kw">workflow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1096-2"><a href="continuous-response.html#cb1096-2"></a><span class="st">  </span><span class="kw">add_model</span>(<span class="kw">linear_reg</span>() <span class="op">%&gt;%</span></span>
<span id="cb1096-3"><a href="continuous-response.html#cb1096-3"></a><span class="st">            </span><span class="kw">set_engine</span>(<span class="st">"lm"</span>) <span class="op">%&gt;%</span></span>
<span id="cb1096-4"><a href="continuous-response.html#cb1096-4"></a><span class="st">            </span><span class="kw">set_mode</span>(<span class="st">"regression"</span>))</span></code></pre></div>
<p>The <strong><em>parsnip</em></strong> package allows us to create an engine that can run this linear regression model easily and repeatedly. <code>linear_reg()</code> tells the engine that this is a linear regression. <code>set_engine("lm")</code> tells the engine to use the <code>lm()</code> function. <code>set_mode()</code> has two options: “regression” and “classification.” Since our left-hand variable is a continuous one, we will set it to “regression”. If it were categorical, we would set the mode to “classification”. The default is “regression,” so the <code>set_mode()</code> command has no effect in this case.</p>
<!-- DK: Don't we need step_ functions? Shouldn't this fail without them? -->
<p>Add a recipe.</p>
<div class="sourceCode" id="cb1097"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1097-1"><a href="continuous-response.html#cb1097-1"></a>lm_wfl &lt;-<span class="st"> </span><span class="kw">workflow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1097-2"><a href="continuous-response.html#cb1097-2"></a><span class="st">  </span><span class="kw">add_model</span>(<span class="kw">linear_reg</span>() <span class="op">%&gt;%</span></span>
<span id="cb1097-3"><a href="continuous-response.html#cb1097-3"></a><span class="st">            </span><span class="kw">set_engine</span>(<span class="st">"lm"</span>) <span class="op">%&gt;%</span></span>
<span id="cb1097-4"><a href="continuous-response.html#cb1097-4"></a><span class="st">            </span><span class="kw">set_mode</span>(<span class="st">"regression"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1097-5"><a href="continuous-response.html#cb1097-5"></a><span class="st">  </span><span class="kw">add_recipe</span>(<span class="kw">recipe</span>(ideology <span class="op">~</span><span class="st"> </span>gender <span class="op">+</span><span class="st"> </span>race <span class="op">+</span><span class="st"> </span>region <span class="op">+</span><span class="st"> </span></span>
<span id="cb1097-6"><a href="continuous-response.html#cb1097-6"></a><span class="st">                      </span>income <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>education,</span>
<span id="cb1097-7"><a href="continuous-response.html#cb1097-7"></a>                    <span class="dt">data =</span> ch11_train)) <span class="op">%&gt;%</span></span>
<span id="cb1097-8"><a href="continuous-response.html#cb1097-8"></a><span class="st">  </span><span class="kw">step_dummy</span>(<span class="kw">all_nominal</span>())</span></code></pre></div>
<p>Examine performance on the cross-validation samples.</p>
<div class="sourceCode" id="cb1098"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1098-1"><a href="continuous-response.html#cb1098-1"></a>lm_wfl <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1098-2"><a href="continuous-response.html#cb1098-2"></a><span class="st">  </span><span class="kw">fit_resamples</span>(<span class="dt">resamples =</span> ch11_folds) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1098-3"><a href="continuous-response.html#cb1098-3"></a><span class="st">  </span><span class="kw">collect_metrics</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   .metric .estimator  mean     n std_err
##   &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 rmse    standard   2.01     10 0.0178 
## 2 rsq     standard   0.138    10 0.00983</code></pre>
<p>Check the predictions against the actual values.</p>
<div class="sourceCode" id="cb1100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1100-1"><a href="continuous-response.html#cb1100-1"></a>lm_wfl <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1100-2"><a href="continuous-response.html#cb1100-2"></a><span class="st">  </span><span class="kw">fit</span>(<span class="dt">data =</span> ch11_train) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1100-3"><a href="continuous-response.html#cb1100-3"></a><span class="st">  </span><span class="kw">predict</span>(<span class="dt">new_data =</span> ch11_train) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1100-4"><a href="continuous-response.html#cb1100-4"></a><span class="st">  </span><span class="kw">bind_cols</span>(ch11_train <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(ideology)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1100-5"><a href="continuous-response.html#cb1100-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ideology, <span class="dt">y =</span> <span class="st">`</span><span class="dt">.pred</span><span class="st">`</span>)) <span class="op">+</span></span>
<span id="cb1100-6"><a href="continuous-response.html#cb1100-6"></a><span class="st">    </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-853-1.png" width="672"></p>
</div>
<div id="bayesian-linear-model" class="section level2">
<h2>
<span class="header-section-number">11.3</span> Bayesian linear model</h2>
<p>Create the workflow object with the model engine.</p>
<div class="sourceCode" id="cb1101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1101-1"><a href="continuous-response.html#cb1101-1"></a>stan_wfl &lt;-<span class="st"> </span><span class="kw">workflow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1101-2"><a href="continuous-response.html#cb1101-2"></a><span class="st">  </span><span class="kw">add_model</span>(<span class="kw">linear_reg</span>() <span class="op">%&gt;%</span></span>
<span id="cb1101-3"><a href="continuous-response.html#cb1101-3"></a><span class="st">            </span><span class="kw">set_engine</span>(<span class="st">"stan"</span>) <span class="op">%&gt;%</span></span>
<span id="cb1101-4"><a href="continuous-response.html#cb1101-4"></a><span class="st">            </span><span class="kw">set_mode</span>(<span class="st">"regression"</span>))</span></code></pre></div>
<p>Add a recipe.</p>
<div class="sourceCode" id="cb1102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1102-1"><a href="continuous-response.html#cb1102-1"></a>stan_wfl &lt;-<span class="st"> </span><span class="kw">workflow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1102-2"><a href="continuous-response.html#cb1102-2"></a><span class="st">  </span><span class="kw">add_model</span>(<span class="kw">linear_reg</span>() <span class="op">%&gt;%</span></span>
<span id="cb1102-3"><a href="continuous-response.html#cb1102-3"></a><span class="st">            </span><span class="kw">set_engine</span>(<span class="st">"stan"</span>) <span class="op">%&gt;%</span></span>
<span id="cb1102-4"><a href="continuous-response.html#cb1102-4"></a><span class="st">            </span><span class="kw">set_mode</span>(<span class="st">"regression"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1102-5"><a href="continuous-response.html#cb1102-5"></a><span class="st">  </span><span class="kw">add_recipe</span>(<span class="kw">recipe</span>(ideology <span class="op">~</span><span class="st"> </span>gender <span class="op">+</span><span class="st"> </span>race <span class="op">+</span><span class="st"> </span>region <span class="op">+</span><span class="st"> </span></span>
<span id="cb1102-6"><a href="continuous-response.html#cb1102-6"></a><span class="st">                      </span>income <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>education,</span>
<span id="cb1102-7"><a href="continuous-response.html#cb1102-7"></a>                    <span class="dt">data =</span> ch11_train)) <span class="op">%&gt;%</span></span>
<span id="cb1102-8"><a href="continuous-response.html#cb1102-8"></a><span class="st">  </span><span class="kw">step_dummy</span>(<span class="kw">all_nominal</span>())</span></code></pre></div>
<p>Examine performance on the cross-validation samples.</p>
<div class="sourceCode" id="cb1103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1103-1"><a href="continuous-response.html#cb1103-1"></a>stan_wfl <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1103-2"><a href="continuous-response.html#cb1103-2"></a><span class="st">  </span><span class="kw">fit_resamples</span>(<span class="dt">resamples =</span> ch11_folds) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1103-3"><a href="continuous-response.html#cb1103-3"></a><span class="st">  </span><span class="kw">collect_metrics</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   .metric .estimator  mean     n std_err
##   &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 rmse    standard   2.01     10 0.0178 
## 2 rsq     standard   0.138    10 0.00982</code></pre>
<p>Check the predictions against the actual values.</p>
<div class="sourceCode" id="cb1105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1105-1"><a href="continuous-response.html#cb1105-1"></a>stan_wfl <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1105-2"><a href="continuous-response.html#cb1105-2"></a><span class="st">  </span><span class="kw">fit</span>(<span class="dt">data =</span> ch11_train) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1105-3"><a href="continuous-response.html#cb1105-3"></a><span class="st">  </span><span class="kw">predict</span>(<span class="dt">new_data =</span> ch11_train) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1105-4"><a href="continuous-response.html#cb1105-4"></a><span class="st">  </span><span class="kw">bind_cols</span>(ch11_train <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(ideology)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1105-5"><a href="continuous-response.html#cb1105-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ideology, <span class="dt">y =</span> <span class="st">`</span><span class="dt">.pred</span><span class="st">`</span>)) <span class="op">+</span></span>
<span id="cb1105-6"><a href="continuous-response.html#cb1105-6"></a><span class="st">    </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-857-1.png" width="672"></p>
</div>
<div id="neural-network" class="section level2">
<h2>
<span class="header-section-number">11.4</span> Neural network</h2>
<p>Create the workflow object with the model engine.</p>
<div class="sourceCode" id="cb1106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1106-1"><a href="continuous-response.html#cb1106-1"></a>nn_wfl &lt;-<span class="st"> </span><span class="kw">workflow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1106-2"><a href="continuous-response.html#cb1106-2"></a><span class="st">  </span><span class="kw">add_model</span>(<span class="kw">mlp</span>(<span class="dt">hidden_units =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb1106-3"><a href="continuous-response.html#cb1106-3"></a><span class="st">            </span><span class="kw">set_engine</span>(<span class="st">"nnet"</span>) <span class="op">%&gt;%</span></span>
<span id="cb1106-4"><a href="continuous-response.html#cb1106-4"></a><span class="st">            </span><span class="kw">set_mode</span>(<span class="st">"regression"</span>))</span></code></pre></div>
<p>Add a recipe.</p>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1107-1"><a href="continuous-response.html#cb1107-1"></a>nn_wfl &lt;-<span class="st"> </span><span class="kw">workflow</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1107-2"><a href="continuous-response.html#cb1107-2"></a><span class="st">  </span><span class="kw">add_model</span>(<span class="kw">mlp</span>(<span class="dt">hidden_units =</span> <span class="dv">5</span>) <span class="op">%&gt;%</span></span>
<span id="cb1107-3"><a href="continuous-response.html#cb1107-3"></a><span class="st">            </span><span class="kw">set_engine</span>(<span class="st">"nnet"</span>) <span class="op">%&gt;%</span></span>
<span id="cb1107-4"><a href="continuous-response.html#cb1107-4"></a><span class="st">            </span><span class="kw">set_mode</span>(<span class="st">"regression"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1107-5"><a href="continuous-response.html#cb1107-5"></a><span class="st">  </span><span class="kw">add_recipe</span>(<span class="kw">recipe</span>(ideology <span class="op">~</span><span class="st"> </span>.,</span>
<span id="cb1107-6"><a href="continuous-response.html#cb1107-6"></a>                    <span class="dt">data =</span> ch11_train)) <span class="op">%&gt;%</span></span>
<span id="cb1107-7"><a href="continuous-response.html#cb1107-7"></a><span class="st">  </span><span class="kw">step_dummy</span>(<span class="kw">all_nominal</span>())</span></code></pre></div>
<p>Examine performance on the cross-validation samples.</p>
<!-- DK: Why is rsq not working? Why does this do so poorly? -->
<div class="sourceCode" id="cb1108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1108-1"><a href="continuous-response.html#cb1108-1"></a>nn_wfl <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1108-2"><a href="continuous-response.html#cb1108-2"></a><span class="st">  </span><span class="kw">fit_resamples</span>(<span class="dt">resamples =</span> ch11_folds) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1108-3"><a href="continuous-response.html#cb1108-3"></a><span class="st">  </span><span class="kw">collect_metrics</span>()</span></code></pre></div>
<pre><code>## ! Fold01: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold02: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold03: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold04: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold05: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold06: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold07: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold08: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold09: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## ! Fold10: internal: A correlation computation is required, but `estimate` is const...</code></pre>
<pre><code>## # A tibble: 2 x 5
##   .metric .estimator   mean     n std_err
##   &lt;chr&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
## 1 rmse    standard     2.17    10  0.0151
## 2 rsq     standard   NaN        0 NA</code></pre>
<p>Check the predictions against the actual values.</p>
<div class="sourceCode" id="cb1120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1120-1"><a href="continuous-response.html#cb1120-1"></a>nn_wfl <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1120-2"><a href="continuous-response.html#cb1120-2"></a><span class="st">  </span><span class="kw">fit</span>(<span class="dt">data =</span> ch11_train) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1120-3"><a href="continuous-response.html#cb1120-3"></a><span class="st">  </span><span class="kw">predict</span>(<span class="dt">new_data =</span> ch11_train) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1120-4"><a href="continuous-response.html#cb1120-4"></a><span class="st">  </span><span class="kw">bind_cols</span>(ch11_train <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(ideology)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1120-5"><a href="continuous-response.html#cb1120-5"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> ideology, <span class="dt">y =</span> <span class="st">`</span><span class="dt">.pred</span><span class="st">`</span>)) <span class="op">+</span></span>
<span id="cb1120-6"><a href="continuous-response.html#cb1120-6"></a><span class="st">    </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">alpha =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-861-1.png" width="672"></p>
</div>
<div id="model-comparison" class="section level2">
<h2>
<span class="header-section-number">11.5</span> Model comparison</h2>
</div>
<div id="cardinal-virtues-1" class="section level2">
<h2>
<span class="header-section-number">11.6</span> Cardinal virtues</h2>
<div id="wisdom-7" class="section level3">
<h3>
<span class="header-section-number">11.6.1</span> Wisdom</h3>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">-->
<img src="other/images/Wisdom.jpg" alt=" " width="1280"><!--
<p class="caption marginnote">--><!--</p>--><!--</div>--></span>
</p>
<p>Recall the first of the four Cardinal Virtues of data science. We need to carefully consider how we would like to approach our problem. In fact, what is our problem to solve?</p>
<p>Now that we have a left-hand variable to estimate with reasonable predictors, let’s think about a substantive question that we would like to answer this chapter. The models we will construct are predictive, not causal, and therefore can only be used for comparisons.</p>
<p>It is important to note that <strong>there are an infinite number of comparisons you can make</strong>. Because our model is predictive, we can only say something about the population if one variable is tweaked and all else is kept the same. For example, we could look at how education affects the self-reported ideology of Asian respondents compared to Black respondents, given that both groups of respondents are well-educated, female, middle-aged, and reside in the Northeast. Or, we could look at the interaction between gender and race and its affect on ideology for certain values of the other variables. There is no right answer as to what question is the best one to answer. Indeed, this is another important choice you will have to make as a data scientist.</p>
</div>
<div id="justice-5" class="section level3">
<h3>
<span class="header-section-number">11.6.2</span> Justice</h3>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">-->
<img src="other/images/Justice.jpg" alt=" " width="960"><!--
<p class="caption marginnote">--><!--</p>--><!--</div>--></span>
</p>
<p>Recall the virtue of Justice: <strong>We want to make sure our models are as just and representative of the real world as possible.</strong> As such, we will split our <code>nes_2016</code> data into two sets: a training set and a testing set. We can do so using the <strong><em>rsample</em></strong> function, <code>initial_split()</code>.</p>
<div class="sourceCode" id="cb1121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1121-1"><a href="continuous-response.html#cb1121-1"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb1121-2"><a href="continuous-response.html#cb1121-2"></a>ch11_split &lt;-<span class="st"> </span><span class="kw">initial_split</span>(ch11)</span>
<span id="cb1121-3"><a href="continuous-response.html#cb1121-3"></a></span>
<span id="cb1121-4"><a href="continuous-response.html#cb1121-4"></a>ch11_training &lt;-<span class="st"> </span>ch11_split <span class="op">%&gt;%</span></span>
<span id="cb1121-5"><a href="continuous-response.html#cb1121-5"></a><span class="st">  </span><span class="kw">training</span>()</span>
<span id="cb1121-6"><a href="continuous-response.html#cb1121-6"></a>ch11_testing &lt;-<span class="st"> </span>ch11_split <span class="op">%&gt;%</span></span>
<span id="cb1121-7"><a href="continuous-response.html#cb1121-7"></a><span class="st">  </span><span class="kw">testing</span>()</span></code></pre></div>
<p><em>We will not be touching the testing set.</em> The testing set can be thought of as the final test to analyze the fit of the model. Never will we use the testing set to train the model. After all, that is what the training set is for! And what exactly does training the model mean? Training is simply the process in which we take the components of the given data and create as accurate a predictive machine as possible.</p>
<p>We have mentioned that the following models will be <em>predictive</em>, not <em>causal</em>. Recall that all we care about in a predictive model is forecasting some value <span class="math inline">\(y_i\)</span> given that we know <span class="math inline">\(x_{i_1}, x_{i_2}, ... x_{i_n}\)</span>. The <span class="math inline">\(y_i\)</span> in our case is <code>ideology</code>. The <span class="math inline">\(x_{i_1}, x_{i_2}, ... x_{i_n}\)</span> in this case are certain known variables, such as <code>state</code>, <code>age</code>, and <code>income</code>, among others. <span class="math inline">\(\beta\)</span> stands the list of unknown parameters which must be estimated. As we will discuss in <strong>Courage</strong>, some of the inputs may not necessarily be linear and additive.</p>
<p>The following equation calculates the <code>ideology</code> of the <em>i</em>th respondent, <span class="math inline">\(y_i\)</span>, as a function of certain linear and/or non-linear parameters.</p>
<p><span class="math display">\[y_i = f(x_{i_1}, x_{i_2}, ..., \beta)\]</span></p>
<p>We cannot infer what would happen to someone’s <code>ideology</code> if their <code>income</code> level was within the 16th percentile, versus within the 96th percentile. The aforementioned inference would be a causal inference, which ignores the possibility that there are confounding variables. In our case, there are many possible confounding variables that are not represented, such as family socioeconomic background and immigration status.</p>
<p>Keep in mind that our goal is to create the best possible model to predict one’s ideology given a number of demographic variables. That is to say, we plan on re-using our model on out-of-sample data. Hence, we have set the testing set aside to serve as one instance in which to re-use our model to make predictions.</p>
<p>Besides the testing set, new out-of-sample data could come from other surveys that collect demographic information, or from website traffic data. These data most likely will not contain information on whether the respondent approves of the president or whether they voted in the presidential election. In order for our model to be relevant to our question, we will assume that new data will <em>not</em> provide <code>pres_appr</code> and <code>voted</code>. When defining our formula later on, we will keep this in mind.</p>
<p>An example Preceptor Table that would answer our guiding question would look something like this.</p>
<!-- DK: Is this correct? Useful? -->
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#aoflzyqbhj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#aoflzyqbhj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aoflzyqbhj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#aoflzyqbhj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#aoflzyqbhj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aoflzyqbhj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#aoflzyqbhj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#aoflzyqbhj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#aoflzyqbhj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#aoflzyqbhj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#aoflzyqbhj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#aoflzyqbhj .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#aoflzyqbhj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#aoflzyqbhj .gt_from_md > :first-child {
  margin-top: 0;
}

#aoflzyqbhj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#aoflzyqbhj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#aoflzyqbhj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#aoflzyqbhj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aoflzyqbhj .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#aoflzyqbhj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#aoflzyqbhj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#aoflzyqbhj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#aoflzyqbhj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#aoflzyqbhj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aoflzyqbhj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#aoflzyqbhj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#aoflzyqbhj .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#aoflzyqbhj .gt_left {
  text-align: left;
}

#aoflzyqbhj .gt_center {
  text-align: center;
}

#aoflzyqbhj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#aoflzyqbhj .gt_font_normal {
  font-weight: normal;
}

#aoflzyqbhj .gt_font_bold {
  font-weight: bold;
}

#aoflzyqbhj .gt_font_italic {
  font-style: italic;
}

#aoflzyqbhj .gt_super {
  font-size: 65%;
}

#aoflzyqbhj .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="aoflzyqbhj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
<thead class="gt_col_headings">
<tr>
<th class="gt_col_heading gt_center gt_columns_bottom_border" rowspan="2" colspan="1">Name</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="6">
        <span class="gt_column_spanner">Covariates</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="1">
        <span class="gt_column_spanner">Outcomes</span>
      </th>
    </tr>
<tr>
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Region</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Gender</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Income</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Education</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Race</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Ideology</th>
    </tr>
</thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000;">Alex</td>
      <td class="gt_row gt_center">17-24</td>
      <td class="gt_row gt_center">Midwest</td>
      <td class="gt_row gt_center">Male</td>
      <td class="gt_row gt_center">34 - 67</td>
      <td class="gt_row gt_center">College</td>
      <td class="gt_row gt_center">White</td>
      <td class="gt_row gt_center">?</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000;">Betty</td>
      <td class="gt_row gt_center">55-64</td>
      <td class="gt_row gt_center">Northeast</td>
      <td class="gt_row gt_center">Female</td>
      <td class="gt_row gt_center">34 - 67</td>
      <td class="gt_row gt_center">College</td>
      <td class="gt_row gt_center">White</td>
      <td class="gt_row gt_center">-2</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000;">...</td>
      <td class="gt_row gt_center">...</td>
      <td class="gt_row gt_center">...</td>
      <td class="gt_row gt_center">...</td>
      <td class="gt_row gt_center">...</td>
      <td class="gt_row gt_center">...</td>
      <td class="gt_row gt_center">...</td>
      <td class="gt_row gt_center">...</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000;">Carl</td>
      <td class="gt_row gt_center">35-44</td>
      <td class="gt_row gt_center">West</td>
      <td class="gt_row gt_center">Male</td>
      <td class="gt_row gt_center">34 - 67</td>
      <td class="gt_row gt_center">College</td>
      <td class="gt_row gt_center">White</td>
      <td class="gt_row gt_center">?</td>
    </tr>
<tr>
<td class="gt_row gt_center" style="border-right-width: 1px; border-right-style: solid; border-right-color: #000000;">Diane</td>
      <td class="gt_row gt_center">17-44</td>
      <td class="gt_row gt_center">South</td>
      <td class="gt_row gt_center">Female</td>
      <td class="gt_row gt_center">34 - 67</td>
      <td class="gt_row gt_center">College</td>
      <td class="gt_row gt_center">White</td>
      <td class="gt_row gt_center">1</td>
    </tr>
</tbody>
</table></div>
<p>We can preliminarily explore our guiding question by plotting age against average ideology, faceting by region.</p>
<div class="sourceCode" id="cb1122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1122-1"><a href="continuous-response.html#cb1122-1"></a>ch11_training <span class="op">%&gt;%</span></span>
<span id="cb1122-2"><a href="continuous-response.html#cb1122-2"></a><span class="st">  </span><span class="kw">group_by</span>(age, region) <span class="op">%&gt;%</span></span>
<span id="cb1122-3"><a href="continuous-response.html#cb1122-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">avg_ideo_by_age =</span> <span class="kw">mean</span>(ideology)) <span class="op">%&gt;%</span></span>
<span id="cb1122-4"><a href="continuous-response.html#cb1122-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> avg_ideo_by_age, <span class="dt">y =</span> age)) <span class="op">+</span></span>
<span id="cb1122-5"><a href="continuous-response.html#cb1122-5"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb1122-6"><a href="continuous-response.html#cb1122-6"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>region) <span class="op">+</span></span>
<span id="cb1122-7"><a href="continuous-response.html#cb1122-7"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept=</span> <span class="dv">0</span>, <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">linetype =</span> <span class="st">"dotted"</span>)</span></code></pre></div>
<p><img src="book_temp_files/figure-html/unnamed-chunk-866-1.png" width="672">
The Northeast, Midwest, and West all skew politically liberal in terms of average ideology per age group. Most notably, not a single age group in the Northeast had a positive average ideology; the most conservative age group is the 55-64 year old group. Meanwhile, in the West and the Midwest, there are clear trends that older age groups tend to have a more conservative average ideology. In contrast, every age group’s average ideology skewed politically conservative in the South save for the 35-44 year olds.</p>
<p>Why can’t we just stop our analysis here? Well, our main question involves predicting the ideology of new people, which a visualization cannot tell you. There are many other factors at hand besides age that influence ideology. In order to answer our question for a subset of the population, we need to keep these factors constant among said subset. For example, if we are interested in the effect of age on ideology by region, we must <em>specifically</em> look at folks who have the same education, income, race, and gender, with different ages and regions.</p>
</div>
<div id="courage-5" class="section level3">
<h3>
<span class="header-section-number">11.6.3</span> Courage</h3>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">-->
<img src="other/images/Courage.jpg" alt=" " width="1024"><!--
<p class="caption marginnote">--><!--</p>--><!--</div>--></span>
</p>
<p>We will be using three different engines as models: <code>lm</code>, <code>stan</code>, and <code>nnet</code>. We will be using <code>lm</code> to fit a standard linear regression and <code>stan</code> to fit a Bayesian linear regression. You have encountered these two engines in previous chapters in the form of the functions <code>lm()</code> and <code>stan_glm()</code>. The last engine is based on multilayer perceptron neural networks, a supervised machine learning process in which data can be evaluated non-linearly.</p>
<!-- EC: Commented out because not relevant: Usually, a simple formula without interaction terms can be plugged right in to `fit_resamples()`. However, ***tidymodels*** does not allow in-line functions in recipes, meaning we need to use a `step_*` function to add the interaction terms. Let's create our recipe. First, we define a formula without interaction terms. Then, using `step_interact()`, we add in the relevant interaction terms.   -->
<!-- What if we create completely new data outside of the testing set? Keep in mind that just because you have a variable in this training data today, does not mean you are going to get it in your production data tomorrow. -->
<!-- Time to make up some imaginary people. Let's say we have four individuals whose ideology in 2016 we wanted to predict. We can create a tibble with the values of their demographic information, like so: -->
<!-- Just because you have a variable in this training data today, does not mean you are going to get it in your production data tomorrow. -->
<!-- DK: Do these have to be factors? Or will characters work as well, like they do with posterior_predict? -->
<!-- ```{r} -->
<!-- new_people <- tibble("name" = c("Alice", "Betty", "Chelsea", "Danielle"), -->
<!--                      "region" = as.factor(c("Midwest", "Northeast", "South", "West")), -->
<!--                      "gender" = as.factor(c("Female", "Female", "Female", "Female")), -->
<!--                      "income" = as.factor(c("34 - 67", "34 - 67", "34 - 67", "34 - 67")), -->
<!--                      "age" = c("17 - 24", "17 - 24", "17 - 24", "17 - 24"), -->
<!--                      "education" = c("College", "College", "College", "College"), -->
<!--                      "race" = c("White", "White", "White", "White")) -->
<!-- ``` -->
<!-- Now, let's predict each new person's ideology using the linear regression model we just created. -->
<!-- ```{r message=FALSE} -->
<!-- lm_model %>% -->
<!--   fit(full_form, data = ch11_training) %>% -->
<!--   predict(new_data = new_people) %>% -->
<!--   bind_cols(new_people) %>% -->
<!--   rename("ideology" = ".pred") -->
<!-- ``` -->
<!-- As you can see, the constant variables are `gender`, `income`, `education`, `age`, and `race`. The most conservative woman was Chelsea, from the South, and the most liberal woman was Betty, from the Northeast. This, of course, can simply be calculated algebraically from the `lm` model. However, we cannot generalize by saying that all young women can be expected to follow this pattern based off of their region. This prediction is only valid for the levels of the variables that we have set. -->
<!-- ```{r} -->
<!-- ch11_formulas <- tibble(formula = c(age_form, -->
<!--                                    race_gender_form, -->
<!--                                    full_form, -->
<!--                                    interact_form), -->
<!--                        group = c("Age only model", -->
<!--                                  "Race and gender model", -->
<!--                                  "Full model without interaction", -->
<!--                                  "Interaction model")) -->
<!-- ``` -->
<!-- Now, we can use `map_*` to apply all of these models and view their metrics to see which ones have the lowest rmse values. -->
<!-- ```{r cache=TRUE, message=FALSE} -->
<!-- set.seed(10) -->
<!-- folds_metrics <- ch11_formulas %>% -->
<!--   mutate(metrics = map(formula, ~ fit_resamples(object = lm_model, -->
<!--                                                 preprocessor = ., -->
<!--                                                 resamples = ch11_folds) %>% -->
<!--                          collect_metrics())) -->
<!-- ``` -->
<!-- Let's present the results stored in our `folds_metrics` object. We are simply extracting the `rmse` metric from each formula: -->
<!-- ```{r} -->
<!-- folds_metrics %>% -->
<!--   mutate(mean_rmse = map_dbl(metrics, ~ filter(., .metric == "rmse") %>% pull(mean)), -->
<!--          se_rmse = map_dbl(metrics, ~ filter(., .metric == "rmse") %>% pull(std_err))) %>% -->
<!--   select(group, mean_rmse, se_rmse) -->
<!-- ``` -->
<!-- Looking at the results, all of the formulas seem to yield a relatively close mean `rmse`. -->
<!-- The models with the lowest rmse value seems to be the Full model without interaction. The mean squared error is close in value to that of the interaction model. -->
</div>
<div id="temperance-7" class="section level3">
<h3>
<span class="header-section-number">11.6.4</span> Temperance</h3>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">-->
<img src="other/images/Temperance.jpg" alt=" " width="960"><!--
<p class="caption marginnote">--><!--</p>--><!--</div>--></span>
</p>
<p>By now, we have created three different linear regression models: one using the <code>lm</code> engine, one using the Bayesian <code>stan</code> engine, and one using the machine learning <code>nnet</code> engine. We have also explored K-fold cross-validation to verify the fit of the model on out-of-sample data. Lastly, we’ve seen how variable selection can change our models.</p>
<p>So many options! How do we choose which model is the best?</p>
<p>First, we should only favor more complex models (or formulas) if the additional complexity is <em>warranted</em>. This is a philosophical principle known as “Occam’s Razor.” It states that, “all other things being equal, simpler solutions are more likely to be correct than complex ones.” When viewed in a modeling framework, Occam’s Razor can be restated as, “all other things being equal, simpler models are to be preferred over complex ones.” In other words, we should only favor the more complex model/formula if the additional complexity is <em>warranted</em>.</p>
<p>Secondly, we have two quantitative metrics to help guide our decision: the <code>rmse</code> and <code>rsq</code> values. Lower <code>rmse</code> values are more desired because they indicate a higher accuracy in predicting the outcome variable. Higher <code>rsq</code> values are better because that means that more of the variation in the dataset can be explained by the predictor variables in the formula.</p>
<p>However, remember that <code>rmse</code> and <code>rsq</code> values are not end-all-be-all. There are other ways to to determine the best model: Did it predict low ideologies well? What about high ideologies? Did it do a good job of generally sorting people into the right end of politically liberal or politically conservative? Were there frequent outlandish answers generated, such as a quantity of <code>ideology</code> too high to exist?</p>
<p>Indeed, even the <code>rmse</code> value’s validity can be up for debate, as it takes the mean squared error. Why not take an absolute value so that larger differences do not seem even larger after getting squared? These are questions you should be asking when relying on a metric to compare models.</p>
<p>Let’s loop back to the original guiding question. How does age affect ideology for respondents from different regions?</p>
<p>Assume that the segment of the population we are interested in is college educated men making an average income. These are vital assumptions to make, as without setting baselines for the other predictor variables, we cannot make any comparisons on region and age.</p>
<p>Say we are specifically interested in the different effects of ages on college-educated men in the Northeast versus the South. Let’s use our second model, <code>stan_model</code>, to explore this problem.</p>
<p>First, create a tibble in which all respondents are college-educated white men making average income. Half of the group will be from the Northeast, and half from the South.</p>
<div class="sourceCode" id="cb1123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1123-1"><a href="continuous-response.html#cb1123-1"></a>wrap_up &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="st">"region"</span> =<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="st">"Northeast"</span>, <span class="st">"South"</span>, <span class="st">"Northeast"</span>, <span class="st">"South"</span>,</span>
<span id="cb1123-2"><a href="continuous-response.html#cb1123-2"></a>                                            <span class="st">"Northeast"</span>, <span class="st">"South"</span>, <span class="st">"Northeast"</span>, <span class="st">"South"</span>,</span>
<span id="cb1123-3"><a href="continuous-response.html#cb1123-3"></a>                                            <span class="st">"Northeast"</span>, <span class="st">"South"</span>, <span class="st">"Northeast"</span>, <span class="st">"South"</span>,</span>
<span id="cb1123-4"><a href="continuous-response.html#cb1123-4"></a>                                            <span class="st">"Northeast"</span>, <span class="st">"South"</span>)),</span>
<span id="cb1123-5"><a href="continuous-response.html#cb1123-5"></a>                     <span class="st">"gender"</span> =<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>,</span>
<span id="cb1123-6"><a href="continuous-response.html#cb1123-6"></a>                                            <span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>,</span>
<span id="cb1123-7"><a href="continuous-response.html#cb1123-7"></a>                                            <span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>, <span class="st">"Male"</span>,</span>
<span id="cb1123-8"><a href="continuous-response.html#cb1123-8"></a>                                            <span class="st">"Male"</span>, <span class="st">"Male"</span>)),</span>
<span id="cb1123-9"><a href="continuous-response.html#cb1123-9"></a>                     <span class="st">"income"</span> =<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">c</span>(<span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>,</span>
<span id="cb1123-10"><a href="continuous-response.html#cb1123-10"></a>                                            <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>,</span>
<span id="cb1123-11"><a href="continuous-response.html#cb1123-11"></a>                                            <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>,</span>
<span id="cb1123-12"><a href="continuous-response.html#cb1123-12"></a>                                            <span class="st">"34 - 67"</span>, <span class="st">"34 - 67"</span>)),</span>
<span id="cb1123-13"><a href="continuous-response.html#cb1123-13"></a>                     <span class="st">"age"</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">"17 - 24"</span>, <span class="st">"17 - 24"</span>, <span class="st">"25 - 34"</span>, <span class="st">"25 - 34"</span>,</span>
<span id="cb1123-14"><a href="continuous-response.html#cb1123-14"></a>                               <span class="st">"35 - 44"</span>, <span class="st">"35 - 44"</span>, <span class="st">"45 - 54"</span>, <span class="st">"45 - 54"</span>,</span>
<span id="cb1123-15"><a href="continuous-response.html#cb1123-15"></a>                               <span class="st">"55 - 64"</span>, <span class="st">"55 - 64"</span>, <span class="st">"65 - 74"</span>, <span class="st">"65 - 74"</span>, <span class="st">"75 +"</span>, <span class="st">"75 +"</span>),</span>
<span id="cb1123-16"><a href="continuous-response.html#cb1123-16"></a>                     <span class="st">"education"</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>, <span class="st">"College"</span>),</span>
<span id="cb1123-17"><a href="continuous-response.html#cb1123-17"></a>                     <span class="st">"race"</span> =<span class="st"> </span><span class="kw">c</span>(<span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>, <span class="st">"White"</span>))</span></code></pre></div>
<p>Next, obtain the <code>ideology</code> values by fitting like we did before:</p>
</div>
</div>
<div id="summary-1" class="section level2">
<h2>
<span class="header-section-number">11.7</span> Summary</h2>

<!-- DK: Sure would be nice to do one mult-category model. Once we get rid of all the logistic regression stuff, we have some extra space/time. -->
</div>
</div></body></html>

<p style="text-align: center;">
<a href="model-choice.html"><button class="btn btn-default">Previous</button></a>
<a href="discrete-response.html"><button class="btn btn-default">Next</button></a>
</p>
<p class="build-date">Page built: 
2020-11-07
</p>
</div>
</div>



</body>
</html>
